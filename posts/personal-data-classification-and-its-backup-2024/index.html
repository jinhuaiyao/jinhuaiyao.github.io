<!DOCTYPE html>
<html lang="en-us" class="scroll-smooth">
    <head><meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>UPDATE - 个人资料分级及备份</title>
<meta name="description" content="2023 版：个人资料分级及备份
最近闲来又整理了一下资料，顺便更新一下备份流程。
启用新的 OneDrive 账号来支持更新后备份流程，1T 空间专门用来云备份所用重要资料，不再使用 iCloud Drive 存放备份。
个人照片和视频 存于 iCloud，下载并保留原片到 Mac mini 的外接 SSD 移动硬盘，移动硬盘通过 Time Machine 备份，Time Machine 配置两块移动硬盘，每小时轮流备份。">
<link rel="canonical" href="http://www.jinhuaiyao.com/posts/personal-data-classification-and-its-backup-2024/">
<link rel="robots" href="/robots.txt" />

<link rel="stylesheet" href="http://www.jinhuaiyao.com/css/app.min.441b02ffc92b02b591048fb99fba42713f2983e9442ca170ad8d0e583c72d017.css" integrity="sha256-RBsC/8krArWRBI+5n7pCcT8pg+lELKFwrY0OWDxy0Bc=" ></head>
    <body class="max-w-screen-lg px-10 mx-auto">
        <header class="flex flex-col sm:flex-row items-center gap-5 sm:gap-10 pt-16 py-12">
    
  
<div class="flex-none w-20 h-20 rounded-full overflow-hidden" >
    <a href="http://www.jinhuaiyao.com/">
        <img srcset="/img/profile-picture_hu141d85d9bc1e471d962271e648f69e4d_967044_2000x2000_fill_q75_box_smart1.jpg 80w" src="/img/profile-picture.jpg" width="2087" height="2215" alt="Huaiyao Jin">
    </a>
</div>

    <div class="flex flex-col gap-5">
    <a href="http://www.jinhuaiyao.com/">
    
    <h3 class="text-center sm:text-left text-4xl font-extrabold text-gray-800 ">Huaiyao Jin</h3>
    
</a>
    <nav>
    <ul class="flex flex-wrap justify-left uppercase text-sm  gap-3 text-gray-500 ">
        
        
        <li class="hover:text-gray-500"><a href="/">首页</a></li>
        
        <li class="hover:text-gray-500"><a href="/posts">文章</a></li>
        
    </ul>
</nav>
    </div>
</header>
        <main id="content">
<article class="flex flex-col gap-5">

    <div class="fixed top-24 left-8 hidden lg:inline-block text-sm " >
        
    </div>


    <header class="flex flex-col gap-1 mb-5">
        <h2 class="text-xl leading-snug font-bold text-gray-900">UPDATE - 个人资料分级及备份</h2>

        <div class="text-xs font-semibold text-gray-500 flex gap-3">
        
        
<time datetime="2024-03-16 16:59:35 &#43;0800 CST" title="2024-03-16 16:59:35 &#43;0800 CST">
    2024/03/16
</time>
        
        
        </div>
    </header>
    </article>



    <section class="content text-base text-gray-800 mt-3">
    <p>2023 版：<a href="https://www.jinhuaiyao.com/posts/personal-data-classification-and-its-backup/">个人资料分级及备份</a></p>
<p>最近闲来又整理了一下资料，顺便更新一下备份流程。</p>
<p>启用新的 OneDrive 账号来支持更新后备份流程，1T 空间专门用来云备份所用重要资料，不再使用 iCloud Drive 存放备份。</p>
<h1 id="个人照片和视频">个人照片和视频</h1>
<p>存于 iCloud，下载并保留原片到 Mac mini 的外接 SSD 移动硬盘，移动硬盘通过 Time Machine 备份，Time Machine 配置两块移动硬盘，每小时轮流备份。</p>
<h1 id="个人资料---1">个人资料 - 1</h1>
<ul>
<li>日常使用的资料</li>
<li>正在学习的资料</li>
<li>配置文件</li>
<li>日记</li>
<li>博客</li>
<li>个人 Wiki（记录和总结，阅读笔记）</li>
<li>曾经的工作笔记</li>
</ul>
<p>以上存于 Dropbox，通过 Mac mini 的 Time Machine 备份，同时每天定时 rsync 到 Onedrive。</p>
<p><img src="https://huaiyao-image-hosting.oss-cn-shanghai.aliyuncs.com/images/20240316204251.png" alt="image.png"></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl"># backup dropbox daily
</span></span><span class="line"><span class="cl">cd /Users/jinhuaiyao/Dropbox
</span></span><span class="line"><span class="cl">rsync -av my_daily ~/OneDrive/Backup/backup_dropbox
</span></span><span class="line"><span class="cl">rsync -av my_config ~/OneDrive/Backup/backup_dropbox
</span></span><span class="line"><span class="cl">rsync -av my_learning ~/OneDrive/Backup/backup_dropbox
</span></span><span class="line"><span class="cl">rsync -av --exclude &#39;logseq&#39; my_logseq ~/OneDrive/Backup/backup_dropbox
</span></span><span class="line"><span class="cl">rsync -av my_notes ~/OneDrive/Backup/backup_dropbox
</span></span><span class="line"><span class="cl">rsync -av --exclude &#39;public&#39; my_website  ~/OneDrive/Backup/backup_dropbox
</span></span><span class="line"><span class="cl">rsync -av --exclude &#39;site&#39; my_wiki  ~/OneDrive/Backup/backup_dropbox
</span></span></code></pre></div><h1 id="个人资料---2">个人资料 - 2</h1>
<ul>
<li>微信聊天记录</li>
<li>账号和密码</li>
<li>其他个人资料（例如工作合同、保险资料、投资统计、体检报告、证件电子版等）</li>
</ul>
<p>微信聊天记录，每周通过客户端手动备份到 Mac mini，再通过 Time Machine 进行备份。</p>
<p>账号和密码存于 1Password，1Password 主密码有备份，其他账号密码都交给 1Password 了。</p>
<p>其他个人资料存于 DEVONthink，通过 WebDAV 同步到 Mac mini 上的 DEVONthink，再通过 Time Machine 进行备份，同时每天定时 rsync 到 Onedrive。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl"># backup devonthink daily
</span></span><span class="line"><span class="cl">cd /Users/jinhuaiyao/Databases
</span></span><span class="line"><span class="cl">rsync -av --exclude Files.noindex Personal.dtBase2 ~/OneDrive/Backup/backup_devonthink
</span></span></code></pre></div><h1 id="个人资料---3">个人资料 - 3</h1>
<ul>
<li>Memos</li>
</ul>
<p>Memos 如今运行在 vps 里的 docker，每天定时 scp 到 Onedrive。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># on vps</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">#!/bin/bash</span>
</span></span><span class="line"><span class="cl">docker stop memos
</span></span><span class="line"><span class="cl">sleep <span class="m">5</span>
</span></span><span class="line"><span class="cl">cp ~/.memos/memos_prod.db /home/xxx/.memos
</span></span><span class="line"><span class="cl">chown xxx:xxx /home/xxx/.memos/memos_prod.db
</span></span><span class="line"><span class="cl">docker start memos
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="m">1</span> <span class="m">17</span> * * * /root/memos_backup.sh &gt; /root/memos_backup.log 2&gt;<span class="p">&amp;</span><span class="m">1</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># on mac mini</span>
</span></span><span class="line"><span class="cl"><span class="nv">IP</span><span class="o">=</span><span class="s2">&#34;xx.xx.xx.xx&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nv">DATE</span><span class="o">=</span><span class="sb">`</span>date +%Y%m%d-%H%M%d<span class="sb">`</span>
</span></span><span class="line"><span class="cl">scp -P <span class="m">11232</span> xxx@<span class="si">${</span><span class="nv">IP</span><span class="si">}</span>:/home/xxx/.memos/memos_prod.db /Users/jinhuaiyao/OneDrive/Backup/backup_memos/memos_prod.db.<span class="si">${</span><span class="nv">DATE</span><span class="si">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="m">10</span> <span class="m">1</span> * * * /bin/bash /Users/jinhuaiyao/Dropbox/my_config/Mac_Script/backup_memos.sh &gt;/Users/jinhuaiyao/Log/backup_memos.txt 2&gt;<span class="p">&amp;</span><span class="m">1</span>
</span></span></code></pre></div><h1 id="其他的收集">其他的收集</h1>
<ul>
<li>收集的软件和工具</li>
<li>收集的学习资料（英语，数据库，编程；文档，图书，音频，视频）</li>
<li>收集的文章及标注</li>
</ul>
<p>以上资料存于 OneDrive，并且通过 Time Machine 进行备份，同时每天 rsync OneDrive 里所有文件到 NAS。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl"># sync onedrive to nas
</span></span><span class="line"><span class="cl">/usr/bin/rsync -avz -e &#34;ssh -p 11236&#34; /Users/jinhuaiyao/Library/CloudStorage/OneDrive-Personal 10.0.3.76:/share/CACHEDEV2_DATA/Backups_OneDrive &gt; /Users/jinhuaiyao/Log/onedrive_sync_to_nas.txt 2&gt;&amp;1
</span></span></code></pre></div><p>这样，最重要的资料 Mac mini 里有一份，Time Machine 里有两份，OneDrive 里有一份，NAS 里有一份，应该是不会再丢数据了。</p>
<p>此外，日常主力使用的 MacBook 每周六还会手动连接到移动硬盘进行 Time Machine 备份，有“备”无患。</p>

    </section>

    
        <div class="pb-14 taxonomy-list tags-list text-gray-600 text-sm font-medium">
            
                    <a class="bg-gray-100 py-2 px-3 rounded-lg" href="/tags/%E5%A4%87%E4%BB%BD/" alt="备份" >
                        备份
                    </a>
            
                    <a class="bg-gray-100 py-2 px-3 rounded-lg" href="/tags/%E6%96%B9%E6%B3%95/" alt="方法" >
                        方法
                    </a>
            
        </div>



    <hr>
    <br> 
    <footer>
        

<div id="tcomment"></div>
<script src="https://cdn.staticfile.org/twikoo/1.6.31/twikoo.all.min.js"></script>
<script>
twikoo.init({
  envId: 'https://utils.jinhuaiyao.com/twikoo', 
  el: '#tcomment'
})
</script>


    </footer>





        </main><footer class="pt-5 pb-10 grid gap-3 sm:grid-cols-2">
    <div class="text-xs font-semibold text-gray-500 order-2 sm:order-1 ">
    © 2017 - 2024  
</div>
    <div class="text-xs font-semibold text-gray-500 order-1 sm:order-2">
    <ul class="flex sm:justify-end gap-5">
    
    </ul>
</div>
</footer></body>
</html>
