<!DOCTYPE html>
<html lang="en-us" class="scroll-smooth">
    <head><meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>把运动统计写在 iPhone 锁屏上，还会自动切换</title>
<meta name="description" content="先看下效果。
之前总觉得 iPhone 锁屏界面中间这部分区域不能自定义一些文字有点遗憾。倘若能放一些重要的提醒或者运动统计信息，可以更好地提醒自己、督促自己运动。毕竟手机一点亮就可以看到。
之前也问过 AI，都没有得到什么好的方案。
直到有一天，同事发给我这个网站。
https://lifegrid-wallpapers.pages.dev/
受它的启发，一通研究，最后实现我想要的效果。真是念念不忘，必有回响。
大致流程如下。
下面是实现过程。
Notion 里记录运动
快捷输入，参照 Notion&#43;Scriptable&#43;快捷指令，每天完成最重要的事">
<link rel="canonical" href="http://www.jinhuaiyao.com/posts/auto-rotating-workout-stats-for-your-iphone-lock-screen/">
<link rel="robots" href="/robots.txt" />

<link rel="stylesheet" href="http://www.jinhuaiyao.com/css/app.min.c4fb5d1d37a7278dec35c95c5cec7493ee464a96974b357140dc61b5f0888822.css" integrity="sha256-xPtdHTenJ43sNclcXOx0k+5GSpaXSzVxQNxhtfCIiCI=" ></head>
    <body class="max-w-screen-md px-10 mx-auto">
        <header class="flex flex-col sm:flex-row items-center gap-5 sm:gap-10 pt-16 py-12">
    

<div class="flex-none w-20 h-20 rounded-full overflow-hidden">
    <a href="http://www.jinhuaiyao.com/">
        <img src="https://huaiyao-image-hosting.oss-cn-shanghai.aliyuncs.com/images/profile-picture.jpg" width="80" height="80" alt="Huaiyao Jin">
    </a>
</div>

    <div class="flex flex-col gap-5">
    <a href="http://www.jinhuaiyao.com/">
    
    <h3 class="text-center sm:text-left text-4xl font-extrabold text-gray-800 ">Huaiyao Jin</h3>
    
</a>
    <nav>
    <ul class="flex flex-wrap justify-left uppercase text-sm  gap-3 text-gray-500 ">
        
        
        <li class="hover:text-gray-500"><a href="/">首页</a></li>
        
        <li class="hover:text-gray-500"><a href="/posts">文章</a></li>
        
    </ul>
</nav>
    </div>
</header>
        <main id="content">
<article class="flex flex-col gap-5">

    <div class="fixed top-24 left-8 hidden lg:inline-block text-sm " >
        
    </div>


    <header class="flex flex-col gap-1 mb-5">
        <h2 class="text-xl leading-snug font-bold text-gray-900">把运动统计写在 iPhone 锁屏上，还会自动切换</h2>

        <div class="text-xs font-semibold text-gray-500 flex gap-3">
        
        
<time datetime="2026-02-22 14:56:07 &#43;0800 &#43;08" title="2026-02-22 14:56:07 &#43;0800 &#43;08">
    2026/02/22
</time>
        
        
        </div>
    </header>
    </article>



    <section class="content text-base text-gray-800 mt-3">
    <p>先看下效果。</p>
<p><img src="https://huaiyao-image-hosting.oss-cn-shanghai.aliyuncs.com/images/IMG_0005.jpg" alt=""></p>
<p>之前总觉得 iPhone 锁屏界面中间这部分区域不能自定义一些文字有点遗憾。倘若能放一些重要的提醒或者运动统计信息，可以更好地提醒自己、督促自己运动。毕竟手机一点亮就可以看到。</p>
<p>之前也问过 AI，都没有得到什么好的方案。</p>
<p>直到有一天，同事发给我这个网站。</p>
<p><a href="https://lifegrid-wallpapers.pages.dev/">https://lifegrid-wallpapers.pages.dev/</a></p>
<p>受它的启发，一通研究，最后实现我想要的效果。真是念念不忘，必有回响。</p>
<p>大致流程如下。</p>
<p><img src="https://huaiyao-image-hosting.oss-cn-shanghai.aliyuncs.com/images/Xnip2026-02-22_10-21-19.png" alt=""></p>
<p>下面是实现过程。</p>
<p><strong>Notion 里记录运动</strong></p>
<p>快捷输入，参照 <a href="https://www.jinhuaiyao.com/posts/notion+scriptable+shortcuts-complete-the-most-important-tasks-every-day/">Notion+Scriptable+快捷指令，每天完成最重要的事</a></p>
<p><strong>Mac mini 定期获取运动历史记录，并上传到云服务器</strong></p>
<p>参照<a href="https://www.jinhuaiyao.com/posts/sharing-the-everyday-uses-of-a-mac-mini/">一台 Mac mini 的日常用途分享</a></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">55 23 * * * /bin/bash /Users/jinhuaiyao/Nextcloud/Config/Mac_Script/upload_heatmap_data.sh &gt;/Users/jinhuaiyao/Log/upload_heatmap_data.txt 2&gt;&amp;1
</span></span><span class="line"><span class="cl">（调用 notion api 获取特定的数据，上传到云服务器）
</span></span></code></pre></div><p>在原有的 job上 添加三段。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">jinhuaiyao@huaiyaos-mac-mini ~ % cat /Users/jinhuaiyao/Nextcloud/Config/Mac_Script/upload_heatmap_data.sh
</span></span><span class="line"><span class="cl">cd /Users/jinhuaiyao/.tmp/
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">DT=`date +%Y_%m_%d`
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">for file in `ls *.txt`
</span></span><span class="line"><span class="cl">do
</span></span><span class="line"><span class="cl">cp $file /Users/jinhuaiyao/Nextcloud/Backup/backup_heatmap/${file}.${DT}
</span></span><span class="line"><span class="cl">done
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">bash workout.sh
</span></span><span class="line"><span class="cl">bash running.sh
</span></span><span class="line"><span class="cl">bash reading.sh
</span></span><span class="line"><span class="cl">bash vocabulary.sh
</span></span><span class="line"><span class="cl">bash englishpod.sh
</span></span><span class="line"><span class="cl">bash plank.sh
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">cat workout_2026.txt | awk -F&#39;跑步|公里&#39; &#39;/跑步/ {sum += $2; count++} END {printf &#34;跑步总次数: %d 次\n跑步总长度: %.1f 公里\n&#34;, count, sum}&#39; &gt;workout_2026_sum.txt
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">cat workout_2026.txt | awk -F&#39;跳绳|个&#39; &#39;/跳绳/ {sum += $2; count++} END {printf &#34;跳绳总次数: %d 次\n跳绳总个数: %.f 个\n&#34;, count, sum}&#39; &gt;&gt;workout_2026_sum.txt
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">awk -F&#39;|&#39; &#39;{
</span></span><span class="line"><span class="cl">    count++;
</span></span><span class="line"><span class="cl">    t = $3; gsub(/ /, &#34;&#34;, t);
</span></span><span class="line"><span class="cl">    m = 0; s = 0;
</span></span><span class="line"><span class="cl">    if (t ~ /分/ &amp;&amp; t ~ /秒/) {
</span></span><span class="line"><span class="cl">        split(t, a, &#34;分&#34;); m = a[1]; sub(/秒/, &#34;&#34;, a[2]); s = a[2];
</span></span><span class="line"><span class="cl">    } else if (t ~ /分钟/) {
</span></span><span class="line"><span class="cl">        sub(/分钟/, &#34;&#34;, t); m = t;
</span></span><span class="line"><span class="cl">    } else if (t ~ /分/) {
</span></span><span class="line"><span class="cl">        sub(/分/, &#34;&#34;, t); m = t;
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">    total = m * 60 + s;
</span></span><span class="line"><span class="cl">    if (total &gt; max) { max = total; max_str = $3 }
</span></span><span class="line"><span class="cl">}
</span></span><span class="line"><span class="cl">END {
</span></span><span class="line"><span class="cl">    printf &#34;平板支撑总次数: %d 次\n平板支撑最长时间: %s\n&#34;, count, max_str
</span></span><span class="line"><span class="cl">}&#39; plank_2026.txt &gt;&gt;workout_2026_sum.txt
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">scp -P 10086 *.txt xx@xx.xx.xx.xx:/home/xx/www/webpage
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">cd  /Users/jinhuaiyao/Nextcloud/Backup/backup_heatmap/
</span></span><span class="line"><span class="cl">find . -type f -mtime +20 -exec rm {} \;
</span></span></code></pre></div><p>三个 txt 文件的格式如下：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">jinhuaiyao@huaiyaos-mac-mini .tmp % tail -5 workout_2026.txt
</span></span><span class="line"><span class="cl">2026-02-12 |1 | 跳绳800个
</span></span><span class="line"><span class="cl">2026-02-13 |1 | 跳绳800个
</span></span><span class="line"><span class="cl">2026-02-14 |1 | 跳绳400个
</span></span><span class="line"><span class="cl">2026-02-20 |1 | 跳绳1200个
</span></span><span class="line"><span class="cl">2026-02-21 |1 | 跳绳1500个
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">jinhuaiyao@huaiyaos-mac-mini .tmp % tail -5 plank_2026.txt
</span></span><span class="line"><span class="cl">2026-02-10 |1 | 1分45秒
</span></span><span class="line"><span class="cl">2026-02-12 |1 | 1分30秒
</span></span><span class="line"><span class="cl">2026-02-19 |1 | 1分45秒
</span></span><span class="line"><span class="cl">2026-02-20 |1 | 1分15秒
</span></span><span class="line"><span class="cl">2026-02-21 |1 | 3分钟
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">jinhuaiyao@huaiyaos-mac-mini .tmp % tail workout_2026_sum.txt
</span></span><span class="line"><span class="cl">跑步总次数: 9 次
</span></span><span class="line"><span class="cl">跑步总长度: 58.3 公里
</span></span><span class="line"><span class="cl">跳绳总次数: 12 次
</span></span><span class="line"><span class="cl">跳绳总个数: 13000 个
</span></span><span class="line"><span class="cl">平板支撑总次数: 27 次
</span></span><span class="line"><span class="cl">平板支撑最长时间:  3分钟
</span></span></code></pre></div><p><strong>云服务器定期运行脚本生成带有统计信息的壁纸</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl"># cron job
</span></span><span class="line"><span class="cl">25 * * * * /root/wallpaper_env/bin/python3 /root/wallpaper_env/generate_wallpaper.py &gt;/root/generate_wallpaper.log  2&gt;&amp;1
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">root@meta-unicorn-2:~# cat /root/wallpaper_env/generate_wallpaper.py
</span></span><span class="line"><span class="cl">import requests
</span></span><span class="line"><span class="cl">from PIL import Image, ImageDraw, ImageFont
</span></span><span class="line"><span class="cl">import re
</span></span><span class="line"><span class="cl">import os
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># --- 配置区 ---
</span></span><span class="line"><span class="cl">DATA_URL = &#34;https://xx.xx.com/workout_2026_sum.txt&#34;
</span></span><span class="line"><span class="cl">BASE_IMAGE_PATH = &#34;/root/wallpaper_env/base_wallpaper.jpg&#34;
</span></span><span class="line"><span class="cl">OUTPUT_PATH = &#34;/home/xx/www/webpage/final_wallpaper.png&#34;
</span></span><span class="line"><span class="cl">WIDTH, HEIGHT = 1260, 2736
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># 字体路径
</span></span><span class="line"><span class="cl">FONT_PATH = &#34;/usr/share/fonts/opentype/noto/NotoSansCJK-Bold.ttc&#34;
</span></span><span class="line"><span class="cl">if not os.path.exists(FONT_PATH):
</span></span><span class="line"><span class="cl">    FONT_PATH = &#34;/usr/share/fonts/truetype/dejavu/DejaVuSans-Bold.ttf&#34;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">def get_workout_data():
</span></span><span class="line"><span class="cl">    try:
</span></span><span class="line"><span class="cl">        r = requests.get(DATA_URL, timeout=10)
</span></span><span class="line"><span class="cl">        r.encoding = &#39;utf-8&#39;
</span></span><span class="line"><span class="cl">        text = r.text
</span></span><span class="line"><span class="cl">        return {
</span></span><span class="line"><span class="cl">            &#34;dist&#34;: re.search(r&#34;跑步总长度:\s*([\d.]+)&#34;, text).group(1),
</span></span><span class="line"><span class="cl">            &#34;run_count&#34;: re.search(r&#34;跑步总次数:\s*(\d+)&#34;, text).group(1),
</span></span><span class="line"><span class="cl">            &#34;rope_count&#34;: re.findall(r&#34;跳绳总次数:\s*(\d+)&#34;, text)[0],
</span></span><span class="line"><span class="cl">            &#34;rope_num&#34;: re.search(r&#34;跳绳总个数:\s*(\d+)&#34;, text).group(1),
</span></span><span class="line"><span class="cl">            &#34;plank_count&#34;: re.search(r&#34;平板支撑总次数:\s*(\d+)&#34;, text).group(1),
</span></span><span class="line"><span class="cl">            &#34;plank_time&#34;: re.search(r&#34;平板支撑最长时间:\s*(.+)&#34;, text).group(1).strip()
</span></span><span class="line"><span class="cl">        }
</span></span><span class="line"><span class="cl">    except Exception as e:
</span></span><span class="line"><span class="cl">        print(f&#34;Data parse error: {e}&#34;)
</span></span><span class="line"><span class="cl">        return None
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">def generate_wallpaper():
</span></span><span class="line"><span class="cl">    data = get_workout_data()
</span></span><span class="line"><span class="cl">    if not data: return
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    try:
</span></span><span class="line"><span class="cl">        base_img = Image.open(BASE_IMAGE_PATH).convert(&#39;RGB&#39;)
</span></span><span class="line"><span class="cl">        img = base_img.resize((WIDTH, HEIGHT), Image.Resampling.LANCZOS)
</span></span><span class="line"><span class="cl">    except Exception as e:
</span></span><span class="line"><span class="cl">        print(f&#34;Image error: {e}&#34;)
</span></span><span class="line"><span class="cl">        return
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    draw = ImageDraw.Draw(img)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    # 1. 字体与颜色
</span></span><span class="line"><span class="cl">    f_xl = ImageFont.truetype(FONT_PATH, 100)
</span></span><span class="line"><span class="cl">    f_md = ImageFont.truetype(FONT_PATH, 40)
</span></span><span class="line"><span class="cl">    f_sm = ImageFont.truetype(FONT_PATH, 40)
</span></span><span class="line"><span class="cl">    C_BLUE = &#34;#68abe7&#34;
</span></span><span class="line"><span class="cl">    C_WHITE = &#34;#FFFFFF&#34;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    # 2. 布局基准
</span></span><span class="line"><span class="cl">    X_POS = WIDTH * 0.12
</span></span><span class="line"><span class="cl">    Y_START = HEIGHT * 0.50
</span></span><span class="line"><span class="cl">    SECTION_GAP = 270
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    def draw_data_block(start_y, label, val, unit):
</span></span><span class="line"><span class="cl">        draw.text((X_POS, start_y), label, fill=C_BLUE, font=f_sm)
</span></span><span class="line"><span class="cl">        draw.text((X_POS, start_y + 60), val, fill=C_WHITE, font=f_xl)
</span></span><span class="line"><span class="cl">        val_w = f_xl.getlength(val)
</span></span><span class="line"><span class="cl">        draw.text((X_POS + val_w + 20, start_y + 125), unit, fill=C_BLUE, font=f_md)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    def draw_separator(y_pos):
</span></span><span class="line"><span class="cl">        draw.line([(X_POS, y_pos), (X_POS + 200, y_pos)], fill=C_BLUE, width=3)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    # --- 开始绘制 ---
</span></span><span class="line"><span class="cl">    curr_y = Y_START
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    # 1. 跑步
</span></span><span class="line"><span class="cl">    draw_data_block(curr_y, f&#34;跑步 - {data[&#39;run_count&#39;]} 次&#34;, data[&#39;dist&#39;], &#34;公里&#34;)
</span></span><span class="line"><span class="cl">    draw_separator(curr_y + 240)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    # 2. 跳绳
</span></span><span class="line"><span class="cl">    curr_y += SECTION_GAP
</span></span><span class="line"><span class="cl">    draw_data_block(curr_y, f&#34;跳绳 - {data[&#39;rope_count&#39;]} 次&#34;, data[&#39;rope_num&#39;], &#34;个&#34;)
</span></span><span class="line"><span class="cl">    draw_separator(curr_y + 240)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    # 3. 平板支撑
</span></span><span class="line"><span class="cl">    curr_y += SECTION_GAP
</span></span><span class="line"><span class="cl">    draw_data_block(curr_y, f&#34;平板支撑 - {data[&#39;plank_count&#39;]} 次&#34;, data[&#39;plank_time&#39;], &#34;最长&#34;)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    # 垂直线
</span></span><span class="line"><span class="cl">    draw.line([(X_POS - 45, Y_START), (X_POS - 45, curr_y + 190)], fill=C_BLUE, width=7)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    img.save(OUTPUT_PATH, &#34;PNG&#34;)
</span></span><span class="line"><span class="cl">    print(f&#34;Successfully generated: {OUTPUT_PATH}&#34;)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">if __name__ == &#34;__main__&#34;:
</span></span><span class="line"><span class="cl">    generate_wallpaper()
</span></span></code></pre></div><p>大致过程是：</p>
<p>先在网上下载一个适合手机分辨率的原有壁纸（每个机型会不一样），放到</p>
<p>/root/wallpaper_env/base_wallpaper.jpg</p>
<p>Python 脚本读取</p>
<p>/home/xx/www/webpage/workout_2026_sum.txt</p>
<p>的内容，将内容绘制到 base_wallpaper.jpg 上，生成带有文字的新的壁纸。</p>
<p>/home/xx/www/webpage/final_wallpaper.png</p>
<p>这个文件可以通过以下 URL 访问到。</p>
<p><a href="https://xx.xx.com/final_wallpaper.png">https://xx.xx.com/final_wallpaper.png</a></p>
<p><strong>iPhone快捷指令每天定时更新壁纸</strong></p>
<p>设计一个快捷指令，并设置自动化每天凌晨运行一次。</p>
<p><img src="https://huaiyao-image-hosting.oss-cn-shanghai.aliyuncs.com/images/IMG_1028.PNG" alt=""></p>
<p><img src="https://huaiyao-image-hosting.oss-cn-shanghai.aliyuncs.com/images/IMG_1029.PNG" alt=""></p>
<p><img src="https://huaiyao-image-hosting.oss-cn-shanghai.aliyuncs.com/images/IMG_1030.PNG" alt=""></p>
<p>完工！</p>

    </section>




    


    <footer>
        


    </footer>





        </main>
        <br><footer class="pt-5 pb-10 grid gap-3 sm:grid-cols-2">
    <div class="text-xs font-semibold text-gray-500 order-2 sm:order-1 ">
    © 2017 - 2026  
</div>
    <div class="text-xs font-semibold text-gray-500 order-1 sm:order-2">
    <ul class="flex sm:justify-end gap-5">
    
    </ul>
</div>
</footer></body>
</html>
